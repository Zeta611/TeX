
\ProvidesPackage{sudoku-dlx}[2018/01/10 v0.1 Sudoku solver by DLX]

\RequirePackage{luatexbase}
\RequirePackage{tikz}
\RequirePackage{mathpazo}

\newcounter{row}
\newcounter{col}

\newcommand\setrow[9]{
  \setcounter{col}{1}
  \foreach \n in {#1, #2, #3, #4, #5, #6, #7, #8, #9} {
    \edef\x{\value{col} - 0.5}
    \edef\y{9.5 - \value{row}}
    \node[anchor=center] at (\x, \y) {\n};
    \stepcounter{col}
  }
  \stepcounter{row}
}

\directlua{require "sudokudlx"}

\def\sudoku@#1{%
  \directlua{sudokudlx.solve(
    \ifx\answ@r Ytrue\else flase\fi, "#1")}
  \par
}

\protected\def\sudoku#1#{%
  \ifx\empty#1\empty
    \let\answ@r N%
  \else
    \let\answ@r Y%
  \fi
  \sudoku@
}
