
\ProvidesPackage{pentominoes}[2018/01/10 v0.1 Pentominoes]

\RequirePackage{luatexbase}
\@ifpackageloaded{xcolor}{}{\RequirePackage[svgnames]{xcolor}}

\directlua{require "pentominoes"}

\fboxsep=0pt
\newcommand\fr@me{\rule{\@side}{\@side}}
\newcommand\CellO{\fbox{\color{Maroon}\fr@me}}
\newcommand\CellP{\fbox{\color{DarkOrange}\fr@me}}
\newcommand\CellQ{\fbox{\color{Chocolate}\fr@me}}
\newcommand\CellR{\fbox{\color{LightSteelBlue}\fr@me}}
\newcommand\CellS{\fbox{\color{yellow}\fr@me}}
\newcommand\CellT{\fbox{\color{red}\fr@me}}
\newcommand\CellU{\fbox{\color{DarkViolet}\fr@me}}
\newcommand\CellV{\fbox{\color{CornflowerBlue}\fr@me}}
\newcommand\CellW{\fbox{\color{Green}\fr@me}}
\newcommand\CellX{\fbox{\color{DeepPink}\fr@me}}
\newcommand\CellY{\fbox{\color{green}\fr@me}}
\newcommand\CellZ{\fbox{\color{DarkKhaki}\fr@me}}
\newcommand\CellB{\fbox{\color{white}\fr@me}}

\newcommand\Row[1]{%
  \par\nobreak\nointerlineskip\vskip-\fboxrule%
  \@tfor\@tempa:=#1 \do {\csname Cell\@tempa\endcsname\kern-\fboxrule}}

\newenvironment{Chessboard}[1][]
  {\bgroup \parindent0pt \parskip0pt
    \newcommand\@side{#1}}
  {\egroup}

\protected\def\pentominoes#1#2#3#4.{%
  \def\n{#4}
  \ifx\empty\n \def\n{10000}\fi
  \directlua{pentominoes.draw("#1",#2,#3,\n)}}

